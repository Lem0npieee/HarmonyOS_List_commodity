Ôr@Ÿªassertions¤code´customTransformCache¬dependencies¢id¤meta±moduleSideEffects¬originalCode±originalSourcemap«resolvedIds®sourcemapChainµsyntheticNamedExportsµtransformDependencies®transformFiles¨cacheAstÔrAÚF”if (!("finalizeConstruction" in ViewPU.prototype)) {
    Reflect.set(ViewPU.prototype, "finalizeConstruction", () => { });
}
/*
 * è´­ç‰©è½¦é¡µé¢ï¼ˆç©ºï¼‰
 */
import { LAYOUT_WIDTH_OR_HEIGHT } from '../common/CommonConstants';
import CartStore from '../common/CartStore';
import OrderStore from '../common/OrderStore';
import PointsStore from '../common/PointsStore';
import NotificationStore from '../common/NotificationStore';
import prompt from '@system.prompt';
import router from '@ohos.router';
export default class CartPage extends ViewPU {
    constructor(parent, params, __localStorage, elmtId = -1, paramsLambda = undefined, extraInfo) {
        super(parent, __localStorage, elmtId, extraInfo);
        if (typeof paramsLambda === "function") {
            this.paramsGenerator_ = paramsLambda;
        }
        this.cartListener = undefined;
        this.__items = new ObservedPropertyObjectPU(CartStore.getItems(), this, "items");
        this.__multiSelectMode = new ObservedPropertySimplePU(true, this, "multiSelectMode");
        this.__selectedIds = new ObservedPropertyObjectPU([], this, "selectedIds");
        this.setInitiallyProvidedValue(params);
        this.finalizeConstruction();
    }
    setInitiallyProvidedValue(params) {
        if (params.cartListener !== undefined) {
            this.cartListener = params.cartListener;
        }
        if (params.items !== undefined) {
            this.items = params.items;
        }
        if (params.multiSelectMode !== undefined) {
            this.multiSelectMode = params.multiSelectMode;
        }
        if (params.selectedIds !== undefined) {
            this.selectedIds = params.selectedIds;
        }
    }
    updateStateVars(params) {
    }
    purgeVariableDependenciesOnElmtId(rmElmtId) {
        this.__items.purgeDependencyOnElmtId(rmElmtId);
        this.__multiSelectMode.purgeDependencyOnElmtId(rmElmtId);
        this.__selectedIds.purgeDependencyOnElmtId(rmElmtId);
    }
    aboutToBeDeleted() {
        this.__items.aboutToBeDeleted();
        this.__multiSelectMode.aboutToBeDeleted();
        this.__selectedIds.aboutToBeDeleted();
        SubscriberManager.Get().delete(this.id__());
        this.aboutToBeDeletedInternal();
    }
    get items() {
        return this.__items.get();
    }
    set items(newValue) {
        this.__items.set(newValue);
    }
    get multiSelectMode() {
        return this.__multiSelectMode.get();
    }
    set multiSelectMode(newValue) {
        this.__multiSelectMode.set(newValue);
    }
    get selectedIds() {
        return this.__selectedIds.get();
    }
    set selectedIds(newValue) {
        this.__selectedIds.set(newValue);
    }
    onDestroy() {
        CartStore.unsubscribe(this.cartListener);
    }
    toggleSelection(id) {
        const exists = this.selectedIds.indexOf(id) >= 0;
        this.selectedIds = exists ? this.selectedIds.filter((v) => v !== id) : [...this.selectedIds, id];
    }
    clearSelections() {
        this.selectedIds = [];
    }
    isSelected(id) {
        return this.selectedIds.indexOf(id) >= 0;
    }
    getRedeemPointsInfo(product) {
        const candidate = product;
        const cost = typeof candidate?.redeemPoints === 'number' ? Math.max(0, candidate.redeemPoints) : 0;
        return { pointsMode: cost > 0, cost };
    }
    handleDeleteSelected() {
        if (!this.multiSelectMode || this.selectedIds.length === 0) {
            return;
        }
        CartStore.removeByIds(this.selectedIds);
        this.clearSelections();
        this.items = CartStore.getItems();
        prompt.showToast({ message: 'å·²åˆ é™¤é€‰ä¸­å•†å“', duration: 1500 });
    }
    async handlePurchaseSelected() {
        if (!this.multiSelectMode || this.selectedIds.length === 0) {
            return;
        }
        const selectedItems = this.items.filter((item) => this.selectedIds.indexOf(item.product.id) >= 0);
        if (selectedItems.length === 0) {
            return;
        }
        const processedIds = [];
        for (const entry of selectedItems) {
            const product = entry.product;
            const pointsInfo = this.getRedeemPointsInfo(product);
            const pointsMode = pointsInfo.pointsMode;
            const cost = pointsInfo.cost;
            if (pointsMode) {
                const ok = await PointsStore.spendPoints(cost);
                if (!ok) {
                    prompt.showToast({ message: 'ç§¯åˆ†ä¸è¶³ï¼Œè·³è¿‡: ' + product.title, duration: 1500 });
                    continue;
                }
            }
            OrderStore.addOrderPendingShip(product.id);
            if (!pointsMode) {
                const earnedPoints = Math.round((product.price / 10) * 10) / 10;
                if (earnedPoints > 0) {
                    await PointsStore.addPoints(earnedPoints);
                }
            }
            this.scheduleOrderLifecycle(product.id, product.title);
            processedIds.push(product.id);
        }
        if (processedIds.length > 0) {
            CartStore.removeByIds(processedIds);
            prompt.showToast({ message: 'è´­ä¹°æˆåŠŸï¼Œå·²ä¸‹å•', duration: 1500 });
        }
        this.clearSelections();
        this.items = CartStore.getItems();
    }
    scheduleOrderLifecycle(goodsId, goodsTitle) {
        setTimeout(() => {
            try {
                if (goodsTitle) {
                    const payload = { resource: goodsTitle, suffix: ' ç°å·²å‘è´§' };
                    NotificationStore.show(payload, 5000);
                }
                else {
                    NotificationStore.show('å•†å“å·²å‘è´§', 5000);
                }
                OrderStore.markShipped(goodsId);
                prompt.showToast({ message: 'æ‚¨è´­ä¹°çš„å•†å“å·²å‘è´§', duration: 2000 });
            }
            catch (e) {
                console.error('å‘è´§é€šçŸ¥å¤±è´¥:', String(e));
            }
        }, 3000);
        setTimeout(() => {
            try {
                if (goodsTitle) {
                    const payload2 = { resource: goodsTitle, suffix: ' ç°å·²åˆ°è´§ï¼Œè¯·æ³¨æ„æŸ¥æ”¶' };
                    NotificationStore.show(payload2, 5000);
                }
                else {
                    NotificationStore.show('å•†å“å·²åˆ°è´§', 5000);
                }
                OrderStore.markArrived(goodsId);
                prompt.showToast({ message: 'æ‚¨è´­ä¹°çš„å•†å“å·²åˆ°è´§ï¼Œè¯·æ³¨æ„æŸ¥æ”¶', duration: 2000 });
            }
            catch (e) {
                console.error('åˆ°è´§é€šçŸ¥å¤±è´¥:', String(e));
            }
        }, 8000);
    }
    openDetail(product) {
        try {
            router.pushUrl({ url: 'pages/GoodsDetailPage', params: { goods: product } });
        }
        catch (err) {
            console.error('è·³è½¬å•†å“è¯¦æƒ…å¤±è´¥:', String(err));
        }
    }
    initialRender() {
        this.observeComponentCreation2((elmtId, isInitialRender) => {
            Column.create();
            Column.justifyContent(FlexAlign.Start);
            Column.alignItems(HorizontalAlign.Start);
            Column.width(LAYOUT_WIDTH_OR_HEIGHT);
            Column.layoutWeight(1);
            Column.backgroundColor({ "id": 16777304, "type": 10001, params: [], "bundleName": "com.example.list_harmony", "moduleName": "entry" });
        }, Column);
        this.observeComponentCreation2((elmtId, isInitialRender) => {
            Row.create();
            Row.padding({ top: 8, bottom: 8 });
        }, Row);
        this.observeComponentCreation2((elmtId, isInitialRender) => {
            Text.create('è´­ç‰©è½¦');
            Text.fontSize(24);
            Text.fontWeight(FontWeight.Bold);
        }, Text);
        Text.pop();
        Row.pop();
        this.observeComponentCreation2((elmtId, isInitialRender) => {
            If.create();
            if (this.items.length === 0) {
                this.ifElseBranchUpdateFunction(0, () => {
                    this.observeComponentCreation2((elmtId, isInitialRender) => {
                        Text.create('è´­ç‰©è½¦ä¸ºç©º');
                        Text.fontSize(14);
                        Text.fontColor({ "id": 16777303, "type": 10001, params: [], "bundleName": "com.example.list_harmony", "moduleName": "entry" });
                        Text.padding({ left: 16, right: 16 });
                    }, Text);
                    Text.pop();
                });
            }
            else {
                this.ifElseBranchUpdateFunction(1, () => {
                    this.observeComponentCreation2((elmtId, isInitialRender) => {
                        List.create({ space: 0 });
                        List.edgeEffect(EdgeEffect.Spring);
                        List.width(LAYOUT_WIDTH_OR_HEIGHT);
                        List.listDirection(Axis.Vertical);
                        List.layoutWeight(1);
                    }, List);
                    this.observeComponentCreation2((elmtId, isInitialRender) => {
                        ForEach.create();
                        const forEachItemGenFunction = (_item, index) => {
                            const entry = _item;
                            {
                                const itemCreation = (elmtId, isInitialRender) => {
                                    ViewStackProcessor.StartGetAccessRecordingFor(elmtId);
                                    ListItem.create(deepRenderFunction, true);
                                    if (!isInitialRender) {
                                        ListItem.pop();
                                    }
                                    ViewStackProcessor.StopGetAccessRecording();
                                };
                                const itemCreation2 = (elmtId, isInitialRender) => {
                                    ListItem.create(deepRenderFunction, true);
                                    ListItem.margin({ left: 4, right: 4 });
                                };
                                const deepRenderFunction = (elmtId, isInitialRender) => {
                                    itemCreation(elmtId, isInitialRender);
                                    this.observeComponentCreation2((elmtId, isInitialRender) => {
                                        Column.create();
                                    }, Column);
                                    this.observeComponentCreation2((elmtId, isInitialRender) => {
                                        Row.create({ space: 8 });
                                        Row.width(LAYOUT_WIDTH_OR_HEIGHT);
                                        Row.alignItems(VerticalAlign.Center);
                                        Row.padding({ top: 12, bottom: 12 });
                                        Row.onClick(() => this.openDetail(entry.product));
                                    }, Row);
                                    this.observeComponentCreation2((elmtId, isInitialRender) => {
                                        Checkbox.create({ name: 'select-' + entry.product.id });
                                        Checkbox.size({ width: 24, height: 24 });
                                        Checkbox.select(this.isSelected(entry.product.id));
                                        Checkbox.onChange(() => this.toggleSelection(entry.product.id));
                                        Checkbox.margin({ right: 8 });
                                    }, Checkbox);
                                    Checkbox.pop();
                                    this.observeComponentCreation2((elmtId, isInitialRender) => {
                                        Image.create(entry.product.cover);
                                        Image.width(112);
                                        Image.height(112);
                                        Image.borderRadius(16);
                                        Image.objectFit(ImageFit.Cover);
                                        Image.draggable(false);
                                    }, Image);
                                    this.observeComponentCreation2((elmtId, isInitialRender) => {
                                        Column.create();
                                        Column.alignItems(HorizontalAlign.Start);
                                        Column.layoutWeight(1);
                                    }, Column);
                                    this.observeComponentCreation2((elmtId, isInitialRender) => {
                                        Text.create(entry.product.title);
                                        Text.fontSize(16);
                                        Text.fontWeight(FontWeight.Medium);
                                        Text.fontColor({ "id": 16777300, "type": 10001, params: [], "bundleName": "com.example.list_harmony", "moduleName": "entry" });
                                        Text.maxLines(2);
                                        Text.textAlign(TextAlign.Start);
                                        Text.textOverflow({ overflow: TextOverflow.Ellipsis });
                                        Text.width('100%');
                                    }, Text);
                                    Text.pop();
                                    this.observeComponentCreation2((elmtId, isInitialRender) => {
                                        Text.create('Â¥' + entry.product.price.toFixed(0));
                                        Text.fontSize(18);
                                        Text.fontColor({ "id": 16777302, "type": 10001, params: [], "bundleName": "com.example.list_harmony", "moduleName": "entry" });
                                        Text.fontWeight(FontWeight.Bold);
                                    }, Text);
                                    Text.pop();
                                    this.observeComponentCreation2((elmtId, isInitialRender) => {
                                        Text.create('æ•°é‡: ' + entry.quantity);
                                        Text.fontSize(12);
                                        Text.fontColor({ "id": 16777303, "type": 10001, params: [], "bundleName": "com.example.list_harmony", "moduleName": "entry" });
                                    }, Text);
                                    Text.pop();
                                    Column.pop();
                                    Row.pop();
                                    this.observeComponentCreation2((elmtId, isInitialRender) => {
                                        Divider.create();
                                        Divider.color({ "id": 16777301, "type": 10001, params: [], "bundleName": "com.example.list_harmony", "moduleName": "entry" });
                                        Divider.opacity(0.6);
                                        Divider.margin({ top: 12 });
                                    }, Divider);
                                    Column.pop();
                                    ListItem.pop();
                                };
                                this.observeComponentCreation2(itemCreation2, ListItem);
                                ListItem.pop();
                            }
                        };
                        this.forEachUpdateFunction(elmtId, this.items, forEachItemGenFunction, undefined, true, false);
                    }, ForEach);
                    ForEach.pop();
                    List.pop();
                });
            }
        }, If);
        If.pop();
        this.observeComponentCreation2((elmtId, isInitialRender) => {
            If.create();
            if (this.items.length > 0) {
                this.ifElseBranchUpdateFunction(0, () => {
                    this.observeComponentCreation2((elmtId, isInitialRender) => {
                        Row.create({ space: 12 });
                        Row.padding({ left: 16, right: 16, top: 8, bottom: 12 });
                        Row.width(LAYOUT_WIDTH_OR_HEIGHT);
                        Row.backgroundColor(Color.White);
                        Row.shadow({ radius: 8, color: '#10000000', offsetY: -2 });
                    }, Row);
                    this.observeComponentCreation2((elmtId, isInitialRender) => {
                        Button.createWithLabel('åˆ é™¤');
                        Button.fontSize(14);
                        Button.fontColor(Color.White);
                        Button.backgroundColor('#FF3B30');
                        Button.borderRadius(18);
                        Button.height(40);
                        Button.layoutWeight(1);
                        Button.onClick(() => this.handleDeleteSelected());
                    }, Button);
                    Button.pop();
                    this.observeComponentCreation2((elmtId, isInitialRender) => {
                        Button.createWithLabel('è´­ä¹°');
                        Button.fontSize(14);
                        Button.fontColor(Color.White);
                        Button.backgroundColor('#FF6600');
                        Button.borderRadius(18);
                        Button.height(40);
                        Button.layoutWeight(1);
                        Button.onClick(async () => await this.handlePurchaseSelected());
                    }, Button);
                    Button.pop();
                    Row.pop();
                });
            }
            else {
                this.ifElseBranchUpdateFunction(1, () => {
                });
            }
        }, If);
        If.pop();
        Column.pop();
    }
    rerender() {
        this.updateDirtyElements();
    }
}
//# sourceMappingURL=CartPage.js.mapÂ—ÙzD:\HuaweiMoveData\Users\18381\Desktop\HarmonyOS\final_project\List_commodity\entry\src\main\ets\common\CommonConstants.etsÙtD:\HuaweiMoveData\Users\18381\Desktop\HarmonyOS\final_project\List_commodity\entry\src\main\ets\common\CartStore.etsÙuD:\HuaweiMoveData\Users\18381\Desktop\HarmonyOS\final_project\List_commodity\entry\src\main\ets\common\OrderStore.etsÙvD:\HuaweiMoveData\Users\18381\Desktop\HarmonyOS\final_project\List_commodity\entry\src\main\ets\common\PointsStore.etsÙ|D:\HuaweiMoveData\Users\18381\Desktop\HarmonyOS\final_project\List_commodity\entry\src\main\ets\common\NotificationStore.etsÙT hvigor_ignore_D:_DevEco Studio2_sdk_default_openharmony_ets_api_@system.prompt.d.tsÙR hvigor_ignore_D:_DevEco Studio2_sdk_default_openharmony_ets_api_@ohos.router.d.tsÙrD:\HuaweiMoveData\Users\18381\Desktop\HarmonyOS\final_project\List_commodity\entry\src\main\ets\pages\CartPage.etsÔrBœªmoduleName±isLocalDependency¯isNodeEntryFile§pkgPath±belongProjectPath§pkgNameªpkgVersion±dependencyPkgInfo¯hostModulesInfo°belongModulePath§checker¬shouldEmitJs¥entryÃÂÙRD:\HuaweiMoveData\Users\18381\Desktop\HarmonyOS\final_project\List_commodity\entryÙLD:\HuaweiMoveData\Users\18381\Desktop\HarmonyOS\final_project\List_commodity¥entry¥1.0.0Ô  ‘ÔrC’²hostDependencyName®hostModuleNameª./CartPage¥entryÙRD:\HuaweiMoveData\Users\18381\Desktop\HarmonyOS\final_project\List_commodity\entryÔrDÜ ®¬getNodeCount²getIdentifierCount®getSymbolCount¬getTypeCountµgetInstantiationCountµgetRelationCacheSizes±isUndefinedSymbol±isArgumentsSymbol¯isUnknownSymbol¯getMergedSymbol®getDiagnostics´getGlobalDiagnostics´getRecursionIdentity¶getUnmatchedProperties¹getTypeOfSymbolAtLocation¯getTypeOfSymbolÙ(getSymbolsOfParameterPropertyDeclaration·getDeclaredTypeOfSymbol³getPropertiesOfType±getPropertyOfTypeÙ"getPrivateIdentifierPropertyOfType·getTypeOfPropertyOfType²getIndexInfoOfType³getIndexInfosOfTypeºgetIndexInfosOfIndexSymbol³getSignaturesOfType²getIndexTypeOfType¬getIndexType¬getBaseTypes¸getBaseTypeOfLiteralType®getWidenedType³getTypeFromTypeNode°getParameterTypeÙ$getParameterIdentifierNameAtPosition¸getPromisedTypeOfPromise®getAwaitedType¸getReturnTypeOfSignature®isNullableType¯getNullableType²getNonNullableType²getNonOptionalType°getTypeArguments®typeToTypeNodeÙ$indexInfoToIndexSignatureDeclaration¿signatureToSignatureDeclaration²symbolToEntityName²symbolToExpression¬symbolToNodeÙ!symbolToTypeParameterDeclarations¼symbolToParameterDeclarationºtypeParameterToDeclaration±getSymbolsInScope³getSymbolAtLocation·getIndexInfosAtLocationÙ!getShorthandAssignmentValueSymbolÙ#getExportSpecifierLocalTargetSymbol·getExportSymbolOfSymbol±getTypeAtLocationÙ tryGetTypeAtLocationWithoutCheckºgetTypeOfAssignmentPatternÙ*getPropertySymbolOfDestructuringAssignment±signatureToString¬typeToString®symbolToStringµtypePredicateToString®writeSignature©writeType«writeSymbol²writeTypePredicate¼getAugmentedPropertiesOfType®getRootSymbols²getSymbolOfExpando±getContextualTypeÙ(getContextualTypeForObjectLiteralElementÙ#getContextualTypeForArgumentAtIndexÙ getContextualTypeForJsxAttribute²isContextSensitiveÙ!getTypeOfPropertyOfContextualTypeµgetFullyQualifiedNameÙ#tryGetResolvedSignatureWithoutCheck´getResolvedSignatureÙ/getResolvedSignatureForStringLiteralCompletionsÙ$getResolvedSignatureForSignatureHelpµgetExpandedParameters¹hasEffectiveRestParameterºcontainsArgumentsReference°getConstantValueµisValidPropertyAccessÙ#isValidPropertyAccessForCompletions»getSignatureFromDeclarationºisImplementationOfOverload¹getImmediateAliasedSymbol°getAliasedSymbol¯getEmitResolver²getExportsOfModule¿getExportsAndPropertiesOfModuleÙ forEachExportAndPropertyOfModule¯getSymbolWalker±getAmbientModules¹getJsxIntrinsicTagNamesAt³isOptionalParameter»tryGetMemberInModuleExportsÙ(tryGetMemberInModuleExportsAndProperties´tryFindAmbientModuleÙ(tryFindAmbientModuleWithoutAugmentations¯getApparentType¬getUnionType²isTypeAssignableTo³createAnonymousType¯createSignature¬createSymbol¯createIndexInfoªgetAnyType­getStringType­getNumberType±createPromiseType¯createArrayType¹getElementTypeOfArrayType®getBooleanType¬getFalseType«getTrueType«getVoidType°getUndefinedType«getNullType¯getESSymbolType¬getNeverType¯getOptionalType®getPromiseType²getPromiseLikeType´getAsyncIterableType²isSymbolAccessible«isArrayType«isTupleType¯isArrayLikeTypeÙ#isTypeInvalidDueToUnionDiscriminantºgetExactOptionalProperties¿getAllPossiblePropertiesOfTypesÙ(getSuggestedSymbolForNonexistentPropertyÙ#getSuggestionForNonexistentPropertyÙ,getSuggestedSymbolForNonexistentJSXAttributeÙ&getSuggestedSymbolForNonexistentSymbolÙ!getSuggestionForNonexistentSymbolÙ&getSuggestedSymbolForNonexistentModuleÙ!getSuggestionForNonexistentExportÙ+getSuggestedSymbolForNonexistentClassMember·getBaseConstraintOfType»getDefaultFromTypeParameter«resolveName¯getJsxNamespaceµgetJsxFragmentFactory¸getAccessibleSymbolChain»getTypePredicateOfSignature¹resolveExternalModuleName»resolveExternalModuleSymbol°tryGetThisTypeAt¹getTypeArgumentConstraint¸getSuggestionDiagnostics¸runWithCancellationTokenÙ3getLocalTypeParametersOfClassOrInterfaceOrTypeAlias´isDeclarationVisible´isPropertyAccessible»getTypeOnlyAliasDeclaration¿getMemberOverrideModifierStatusÙ!isTypeParameterPossiblyReferenced²getConstEnumRelate´clearConstEnumRelateµdeleteConstEnumRelateÙ$getTypeArgumentsForResolvedSignatureµgetCheckedSourceFilesÙ"collectHaveTsNoCheckFilesForLinter·clearQualifiedNameCache®isStaticRecord²isStaticSourceFile³createIntrinsicTypeÔ  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  Ô  ÃÃÚ#5/*
 * è´­ç‰©è½¦é¡µé¢ï¼ˆç©ºï¼‰
 */
import { LAYOUT_WIDTH_OR_HEIGHT } from '../common/CommonConstants';
import CartStore, { CartItem } from '../common/CartStore';
import { GoodsListItemType } from '../viewmodel/InitialData';
import OrderStore from '../common/OrderStore';
import PointsStore from '../common/PointsStore';
import NotificationStore, { NotificationPayload } from '../common/NotificationStore';
import prompt from '@system.prompt';
import { PointsGoodsItem } from '../viewmodel/PointsGoodsData';
import router from '@ohos.router';

interface PointsInfo {
  pointsMode: boolean;
  cost: number;
}

@Component
export default struct CartPage {
  private cartListener!: () => void;
  @State private items: CartItem[] = CartStore.getItems();
  @State private multiSelectMode: boolean = true; // å§‹ç»ˆå¤„äºå¤šé€‰æ¨¡å¼
  @State private selectedIds: number[] = [];

  constructor() {
    super();
    this.cartListener = () => {
      try {
        this.items = CartStore.getItems();
      } catch (e) {
        console.error('æ›´æ–°è´­ç‰©è½¦åˆ—è¡¨å¤±è´¥:', String(e));
      }
    };
    CartStore.subscribe(this.cartListener);
  }

  onDestroy() {
    CartStore.unsubscribe(this.cartListener);
  }

  private toggleSelection(id: number): void {
    const exists: boolean = this.selectedIds.indexOf(id) >= 0;
    this.selectedIds = exists ? this.selectedIds.filter((v: number) => v !== id) : [...this.selectedIds, id];
  }

  private clearSelections(): void {
    this.selectedIds = [];
  }

  private isSelected(id: number): boolean {
    return this.selectedIds.indexOf(id) >= 0;
  }

  private getRedeemPointsInfo(product: GoodsListItemType): PointsInfo {
    const candidate = product as PointsGoodsItem;
    const cost: number = typeof candidate?.redeemPoints === 'number' ? Math.max(0, candidate.redeemPoints) : 0;
    return { pointsMode: cost > 0, cost } as PointsInfo;
  }

  private handleDeleteSelected(): void {
    if (!this.multiSelectMode || this.selectedIds.length === 0) {
      return;
    }
    CartStore.removeByIds(this.selectedIds);
    this.clearSelections();
    this.items = CartStore.getItems();
    prompt.showToast({ message: 'å·²åˆ é™¤é€‰ä¸­å•†å“', duration: 1500 });
  }

  private async handlePurchaseSelected(): Promise<void> {
    if (!this.multiSelectMode || this.selectedIds.length === 0) {
      return;
    }
    const selectedItems: CartItem[] = this.items.filter((item: CartItem) => this.selectedIds.indexOf(item.product.id) >= 0);
    if (selectedItems.length === 0) {
      return;
    }
    const processedIds: number[] = [];
    for (const entry of selectedItems) {
      const product: GoodsListItemType = entry.product;
      const pointsInfo = this.getRedeemPointsInfo(product);
      const pointsMode: boolean = pointsInfo.pointsMode;
      const cost: number = pointsInfo.cost;
      if (pointsMode) {
        const ok: boolean = await PointsStore.spendPoints(cost);
        if (!ok) {
          prompt.showToast({ message: 'ç§¯åˆ†ä¸è¶³ï¼Œè·³è¿‡: ' + product.title, duration: 1500 });
          continue;
        }
      }
      OrderStore.addOrderPendingShip(product.id);
      if (!pointsMode) {
        const earnedPoints: number = Math.round((product.price / 10) * 10) / 10;
        if (earnedPoints > 0) {
          await PointsStore.addPoints(earnedPoints);
        }
      }
      this.scheduleOrderLifecycle(product.id, product.title);
      processedIds.push(product.id);
    }
    if (processedIds.length > 0) {
      CartStore.removeByIds(processedIds);
      prompt.showToast({ message: 'è´­ä¹°æˆåŠŸï¼Œå·²ä¸‹å•', duration: 1500 });
    }
    this.clearSelections();
    this.items = CartStore.getItems();
  }

  private scheduleOrderLifecycle(goodsId: number, goodsTitle?: Resource): void {
    setTimeout(() => {
      try {
        if (goodsTitle) {
          const payload: NotificationPayload = { resource: goodsTitle, suffix: ' ç°å·²å‘è´§' } as NotificationPayload;
          NotificationStore.show(payload, 5000);
        } else {
          NotificationStore.show('å•†å“å·²å‘è´§', 5000);
        }
        OrderStore.markShipped(goodsId);
        prompt.showToast({ message: 'æ‚¨è´­ä¹°çš„å•†å“å·²å‘è´§', duration: 2000 });
      } catch (e) {
        console.error('å‘è´§é€šçŸ¥å¤±è´¥:', String(e));
      }
    }, 3000);
    setTimeout(() => {
      try {
        if (goodsTitle) {
          const payload2: NotificationPayload = { resource: goodsTitle, suffix: ' ç°å·²åˆ°è´§ï¼Œè¯·æ³¨æ„æŸ¥æ”¶' } as NotificationPayload;
          NotificationStore.show(payload2, 5000);
        } else {
          NotificationStore.show('å•†å“å·²åˆ°è´§', 5000);
        }
        OrderStore.markArrived(goodsId);
        prompt.showToast({ message: 'æ‚¨è´­ä¹°çš„å•†å“å·²åˆ°è´§ï¼Œè¯·æ³¨æ„æŸ¥æ”¶', duration: 2000 });
      } catch (e) {
        console.error('åˆ°è´§é€šçŸ¥å¤±è´¥:', String(e));
      }
    }, 8000);
  }

  private openDetail(product: GoodsListItemType): void {
    try {
      router.pushUrl({ url: 'pages/GoodsDetailPage', params: { goods: product } });
    } catch (err) {
      console.error('è·³è½¬å•†å“è¯¦æƒ…å¤±è´¥:', String(err));
    }
  }

  build() {
    Column() {
      Row() {
        Text('è´­ç‰©è½¦')
          .fontSize(24)
          .fontWeight(FontWeight.Bold)
      }
      .padding({ top: 8, bottom: 8 })
      if (this.items.length === 0) {
        Text('è´­ç‰©è½¦ä¸ºç©º')
          .fontSize(14)
          .fontColor($r('app.color.gray'))
          .padding({ left: 16, right: 16 })
      } else {
        List({ space: 0 }) {
          ForEach(this.items, (entry: CartItem, index?: number) => {
            ListItem() {
              Column() {
                Row({ space: 8 }) {
                  Checkbox({ name: 'select-' + entry.product.id })
                    .size({ width: 24, height: 24 })
                    .select(this.isSelected(entry.product.id))
                    .onChange(() => this.toggleSelection(entry.product.id))
                    .margin({ right: 8 });
                  Image(entry.product.cover)
                    .width(112)
                    .height(112)
                    .borderRadius(16)
                    .objectFit(ImageFit.Cover)
                    .draggable(false)
                  Column() {
                    Text(entry.product.title)
                      .fontSize(16)
                      .fontWeight(FontWeight.Medium)
                      .fontColor($r('app.color.deepGray'))
                      .maxLines(2)
                      .textAlign(TextAlign.Start)
                      .textOverflow({ overflow: TextOverflow.Ellipsis })
                      .width('100%')
                    Text('Â¥' + entry.product.price.toFixed(0))
                      .fontSize(18)
                      .fontColor($r('app.color.freshRed'))
                      .fontWeight(FontWeight.Bold)
                    Text('æ•°é‡: ' + entry.quantity)
                      .fontSize(12)
                      .fontColor($r('app.color.gray'))
                  }
                  .alignItems(HorizontalAlign.Start)
                  .layoutWeight(1)
                }
                .width(LAYOUT_WIDTH_OR_HEIGHT)
                .alignItems(VerticalAlign.Center)
                .padding({ top: 12, bottom: 12 })
                .onClick(() => this.openDetail(entry.product))

                Divider()
                  .color($r('app.color.divider'))
                  .opacity(0.6)
                  .margin({ top: 12 })
              }
            }
            .margin({ left: 4, right: 4 })
          })
        }
        .edgeEffect(EdgeEffect.Spring)
        .width(LAYOUT_WIDTH_OR_HEIGHT)
        .listDirection(Axis.Vertical)
        .layoutWeight(1)
      }

      if (this.items.length > 0) {
        Row({ space: 12 }) {
          Button('åˆ é™¤')
            .fontSize(14)
            .fontColor(Color.White)
            .backgroundColor('#FF3B30')
            .borderRadius(18)
            .height(40)
            .layoutWeight(1)
            .onClick(() => this.handleDeleteSelected())

          Button('è´­ä¹°')
            .fontSize(14)
            .fontColor(Color.White)
            .backgroundColor('#FF6600')
            .borderRadius(18)
            .height(40)
            .layoutWeight(1)
            .onClick(async () => await this.handlePurchaseSelected())
        }
        .padding({ left: 16, right: 16, top: 8, bottom: 12 })
        .width(LAYOUT_WIDTH_OR_HEIGHT)
        .backgroundColor(Color.White)
        .shadow({ radius: 8, color: '#10000000', offsetY: -2 })
      }
    }
    .justifyContent(FlexAlign.Start)
    .alignItems(HorizontalAlign.Start)
    .width(LAYOUT_WIDTH_OR_HEIGHT)
    .layoutWeight(1)
    .backgroundColor($r('app.color.primaryBgColor'))
  }
}
ÀÔrE—®@system.prompt¬@ohos.router¹../common/CommonConstants³../common/CartStore´../common/OrderStoreµ../common/PointsStore»../common/NotificationStoreÔrF—ªassertions¨external¢id¤meta±moduleSideEffectsªresolvedByµsyntheticNamedExportsAÃÙT hvigor_ignore_D:_DevEco Studio2_sdk_default_openharmony_ets_api_@system.prompt.d.tsAÃªoh-resolveÂFAÃÙR hvigor_ignore_D:_DevEco Studio2_sdk_default_openharmony_ets_api_@ohos.router.d.tsAÃªoh-resolveÂFAÂÙzD:\HuaweiMoveData\Users\18381\Desktop\HarmonyOS\final_project\List_commodity\entry\src\main\ets\common\CommonConstants.etsAÃªoh-resolveÂFAÂÙtD:\HuaweiMoveData\Users\18381\Desktop\HarmonyOS\final_project\List_commodity\entry\src\main\ets\common\CartStore.etsAÃªoh-resolveÂFAÂÙuD:\HuaweiMoveData\Users\18381\Desktop\HarmonyOS\final_project\List_commodity\entry\src\main\ets\common\OrderStore.etsAÃªoh-resolveÂFAÂÙvD:\HuaweiMoveData\Users\18381\Desktop\HarmonyOS\final_project\List_commodity\entry\src\main\ets\common\PointsStore.etsAÃªoh-resolveÂFAÂÙ|D:\HuaweiMoveData\Users\18381\Desktop\HarmonyOS\final_project\List_commodity\entry\src\main\ets\common\NotificationStore.etsAÃªoh-resolveÂ“ÔrG–§version¤fileªsourceRoot§sources¥names¨mappings«CartPage.js ‘¬CartPage.etsÜj‘”    ‘” ˜”   ” ”	 	” ”! !”' '”ÌB ÌB”ÌC ÌC–”   ” ” ” $”+ 9”, :–”   ” ” ” ”- -”. .–”   ” ” ” ”/ /”0 0–”   ” ” 1” 7”; ÌT”< ÌU–”  	 ” 	” 	” 	”# 	#”$ 	$–”   ” ” ” ”! !”" "–”   ” ” ” ” ” ‘”  •”4 %”= .”> /”ÌF 7”ÌH 9’”> ,”ÌB 0’”: )”< +‘” ’” ” ’” ” ’” ”  ’” ”  ’” ” ’” ” ’” %” %š” &” &” &” &” &”" &”# &”/ &+”0 &,”1 &-’” '” '”” )
” )” )” )$Ÿ” *” *
” *” *” * ” *!”' *,”( *-”/ *4”0 *5”2 *7”3 *8”7 *<”8 *=”9 *>Ü $” +” +” +	” +” +”! +”" +”# +”$ + ”( +$”) +%”4 +0”5 +1”; +7”< +8”= +9”> +ÌB”Ì@ +ÌD”ÌB +ÌF”ÌC +ÌG”ÌD +ÌH”ÌI +ÌM”ÌK +ÌO”ÌL +ÌP”ÌM +ÌQ”ÌN +ÌR”ÌO +ÌS”ÌP +ÌT”ÌS +ÌW”ÌW +Ì[”ÌX +Ì\”Ìc +Ìg”Ìe +Ìi”Ìg +Ìk”Ìh +Ìl”Ìi +Ìm’” ,” ,’” .
” .—” /” /” /	” /” /” /” /’” 0” 0”” 2
” 2” 2” 2” 3” 3” 3” 3” 3”  3”' 3#”( 3$”* 3&”+ 3'”/ 3+”0 3,”1 3-’” 4” 4”” 6
” 6” 6” 68–” 7” 7
” 7” 7”! 70”" 71Ü ” 8” 8
” 8” 8” 8 ”% 8)”' 8+”3 87”8 8<”Ì@ 8ÌD”ÌA 8ÌE”ÌB 8ÌF”ÌC 8ÌG”ÌG 8ÌK”ÌH 8ÌL”ÌK 8ÌO”ÌL 8ÌP”ÌM 8ÌQ”ÌO 8ÌS”ÌX 8Ì\”ÌY 8Ì]”Ìe 8Ìi”Ìf 8Ìj”Ìg 8Ìk”Ìh 8Ìl”Ìi 8Ìm”Ìj 8Ìn”Ìk 8Ìoœ” 9” 9” 9” 9” 9”! 9”$ 9 ”% 9!”' 9#”+ 9'”- 97”. 98’” :” :’” <
” <Ÿ” =” =” =	” =” =”! =”% =!”) =%”* =&”5 =1”6 =2”< =8”ÌA ==”ÌB =>”ÌD =Ì@’” >” >‘”	 ?š” Ì@” Ì@” Ì@” Ì@” Ì@”" Ì@”# Ì@”. Ì@*”/ Ì@+”0 Ì@,–” ÌA” ÌA” ÌA	” ÌA” ÌA” ÌAš” ÌB” ÌB” ÌB	” ÌB” ÌB” ÌB” ÌB”' ÌB#”) ÌB%”* ÌB&Ü ” ÌC” ÌC
” ÌC” ÌC” ÌC” ÌC”" ÌC”$ ÌC ”- ÌC)”/ ÌC+”7 ÌC3”9 ÌC5”= ÌC9”? ÌC;”Ì@ ÌC<”ÌA ÌC=’” ÌD” ÌD”” ÌF
”	 ÌF”
 ÌF”  ÌF&Ÿ” ÌG” ÌG” ÌG	” ÌG” ÌG”! ÌG”% ÌG!”) ÌG%”* ÌG&”5 ÌG1”6 ÌG2”< ÌG8”ÌA ÌG=”ÌB ÌG>”ÌD ÌGÌ@’” ÌH” ÌH‘”	 ÌIÜ ” ÌJ” ÌJ
” ÌJ” ÌJ&”" ÌJ*”# ÌJ+”( ÌJ0”) ÌJ1”/ ÌJ7”0 ÌJ8”1 ÌJ9”5 ÌJÌG”7 ÌJÌI”9 ÌJÌK”: ÌJÌL”> ÌJÌP”? ÌJÌQ”ÌJ ÌJÌ\”ÌK ÌJÌ]”ÌR ÌJÌd”ÌS ÌJÌe”ÌW ÌJÌi”ÌX ÌJÌj”Ì_ ÌJÌq”Ì` ÌJÌr”Ìb ÌJÌt”Ìc ÌJÌu”Ìg ÌJÌy”Ìh ÌJÌz”Ìi ÌJÌ{”Ìj ÌJÌ|˜” ÌK” ÌK” ÌK” ÌK”  ÌK”% ÌK!”& ÌK"”( ÌK$’” ÌL” ÌL‘”	 ÌM–” ÌN” ÌN
” ÌN” ÌN#” ÌN%”  ÌN&—” ÌO” ÌO	” ÌO” ÌO” ÌO”) ÌO%”+ ÌO'˜” ÌP” ÌP” ÌP” ÌP)”! ÌP.”" ÌP/”) ÌP6”* ÌP7›” ÌQ” ÌQ” ÌQ” ÌQ”# ÌQ”$ ÌQ”7 ÌQ1”8 ÌQ2”? ÌQ9”Ì@ ÌQ:”ÌA ÌQ;˜” ÌR” ÌR” ÌR” ÌR"”) ÌR,”* ÌR-”4 ÌR7”5 ÌR8˜” ÌS” ÌS” ÌS” ÌS”# ÌS%”$ ÌS&”( ÌS*”) ÌS+”” ÌT” ÌT
” ÌT” ÌTœ” ÌU” ÌU” ÌU” ÌU”! ÌU"”, ÌU-”- ÌU.”8 ÌU9”9 ÌU:”= ÌU>”> ÌU?”? ÌUÌ@•” ÌV” ÌV” ÌV” ÌV” ÌVÜ ” ÌW
” ÌW” ÌW”$ ÌW”% ÌW”' ÌW”. ÌW$”0 ÌW&”; ÌW1”> ÌW4”ÌE ÌW;”ÌF ÌW<”ÌK ÌWÌA”ÌM ÌWÌC”ÌU ÌWÌK”ÌW ÌWÌM”Ì[ ÌWÌQ”Ì] ÌWÌS”Ì^ ÌWÌT”Ì_ ÌWÌU’” ÌX
” ÌX‘” ÌY	‘” ÌZš” Ì[” Ì[” Ì[”* Ì[$”+ Ì[%”2 Ì[,”3 Ì[-”5 Ì[/”6 Ì[0”7 Ì[1•” Ì\” Ì\
” Ì\” Ì\” Ì\Ü ” Ì]” Ì]”" Ì]”% Ì]%”) Ì])”* Ì]*”/ Ì]/”0 Ì]0”1 Ì]1”8 Ì]8”9 Ì]9”> Ì]>”ÌA Ì]ÌA”ÌC Ì]ÌC”ÌD Ì]ÌD”ÌG Ì]ÌG”ÌI Ì]ÌI”ÌJ Ì]ÌJ”ÌM Ì]ÌM”ÌO Ì]ÌO”ÌP Ì]ÌP–” Ì^” Ì^”  Ì^”# Ì^”$ Ì^”& Ì^™” Ì_
” Ì_”% Ì_”& Ì_”/ Ì_%”0 Ì_&”< Ì_2”= Ì_3”> Ì_4‘” Ì`	‘” Ìa” Ìb” Ìb
” Ìb”' Ìb!”( Ìb"”/ Ìb)”0 Ìb*”2 Ìb,”4 Ìb.”; Ìb5”< Ìb6”ÌA Ìb;”ÌB Ìb<”ÌC Ìb=š” Ìc” Ìc” Ìc” Ìc” Ìc”% Ìc”& Ìc ”( Ìc"”) Ìc#”* Ìc$‘”	 Ìd˜” Ìe” Ìe” Ìe” Ìe” Ìe”" Ìe”# Ìe”% Ìe!˜” Ìf” Ìf” Ìf”! Ìf”" Ìf”. Ìf(”/ Ìf)”0 Ìf*Ü ” Ìg” Ìg” Ìg” Ìg” Ìg” Ìg”& Ìg ”( Ìg"”2 Ìg,”4 Ìg.”< Ìg6”> Ìg8”ÌB Ìg<”ÌD Ìg>”ÌE Ìg?”ÌF ÌgÌ@‘”	 Ìh–” Ìi” Ìi” Ìi	” Ìi” Ìi” Ìiš” Ìj” Ìj” Ìj	” Ìj” Ìj” Ìj” Ìj”' Ìj#”) Ìj%”* Ìj&’” Ìk” Ìk–” Ìm
” Ìm ” Ìm!”" Ìm0”$ Ìm2”. ÌmÌG•” Ìn” Ìn” Ìn” Ìn” Ìn’” Ìo” Ìo
”” Ìp” Ìp” Ìp”  Ìp” Ìq
” Ìq”! Ìq”$ Ìq/”& Ìq1”. Ìq9”0 Ìq;”: ÌqÌE”< ÌqÌG”ÌB ÌqÌM”ÌD ÌqÌO”ÌK ÌqÌV”ÌM ÌqÌo”ÌN ÌqÌpš” Ìr
”% Ìr”& Ìr”* Ìr ”+ Ìr!”2 Ìr(”4 Ìr*”8 Ìr.”9 Ìr/”: Ìr0‘” Ìs	‘” Ìsš” Ìt
”% Ìt”& Ìt”* Ìt ”+ Ìt!”2 Ìt(”4 Ìt*”8 Ìt.”9 Ìt/”: Ìt0‘” Ìu	˜” Ìv” Ìv” Ìv”& Ìv”' Ìv”. Ìv&”/ Ìv'”0 Ìv(Ü ” Ìw” Ìw” Ìw”  Ìw”! Ìw”# Ìw”* Ìw"”, Ìw$”7 Ìw/”9 Ìw1”ÌA Ìw9”ÌC Ìw;”ÌG Ìw?”ÌI ÌwÌA”ÌJ ÌwÌB”ÌK ÌwÌC‘” Ìx”” Ìx” Ìx” Ìx” Ìx” Ìy” Ìy” Ìy” Ìy” Ìy”' Ìy”) Ìy!”/ Ìy'”0 Ìy(”1 Ìy)”2 Ìy*”3 Ìy+”4 Ìy,‘” Ìz–” Ì{”	 Ì{” Ì{” Ì{” Ì{” Ì{•” Ì|” Ì|” Ì|” Ì|” Ì|’” Ì}” Ì}
”” Ì~” Ì~” Ì~”  Ì~” Ì
” Ì”" Ì”% Ì0”' Ì2”/ Ì:”1 Ì<”; ÌÌF”= ÌÌH”ÌC ÌÌN”ÌE ÌÌP”ÌR ÌÌ]”ÌT ÌÌv”ÌU ÌÌwš” Ì€
”% Ì€”& Ì€”* Ì€ ”+ Ì€!”3 Ì€)”5 Ì€+”9 Ì€/”: Ì€0”; Ì€1‘” Ì	‘” Ìš” Ì‚
”% Ì‚”& Ì‚”* Ì‚ ”+ Ì‚!”2 Ì‚(”4 Ì‚*”8 Ì‚.”9 Ì‚/”: Ì‚0‘” Ìƒ	˜” Ì„” Ì„” Ì„”& Ì„”' Ì„”. Ì„&”/ Ì„'”0 Ì„(Ü ” Ì…” Ì…” Ì…”  Ì…”! Ì…”# Ì…”* Ì…"”, Ì…$”= Ì…5”? Ì…7”ÌG Ì…?”ÌI Ì…ÌA”ÌM Ì…ÌE”ÌO Ì…ÌG”ÌP Ì…ÌH”ÌQ Ì…ÌI‘” Ì†”” Ì†” Ì†” Ì†” Ì†” Ì‡” Ì‡” Ì‡” Ì‡” Ì‡”' Ì‡”) Ì‡!”/ Ì‡'”0 Ì‡(”1 Ì‡)”2 Ì‡*”3 Ì‡+”4 Ì‡,‘” Ìˆ–” Ì‰”	 Ì‰” Ì‰” Ì‰” Ì‰” Ì‰’” ÌŠ” ÌŠ”” ÌŒ
” ÌŒ” ÌŒ” ÌŒ/’” Ì” ÌÜ ” Ì” Ì” Ì” Ì” Ì” Ì”  Ì”" Ì”9 Ì3”; Ì5”ÌA Ì;”ÌC Ì=”ÌE Ì?”ÌJ ÌÌD”ÌL ÌÌF”ÌS ÌÌM”ÌU ÌÌO”ÌW ÌÌQ”ÌX ÌÌR”ÌY ÌÌS‘”	 Ì”” Ì” Ì” Ì” Ì” Ì” Ì” Ì” Ì” Ì”% Ì”' Ì!”- Ì'”. Ì(”1 Ì+”2 Ì,”3 Ì-”4 Ì.‘”	 Ì‘’” Ì’” Ì’‘” Ì”’” Ì•” Ì•
˜” Ì•” Ì•
” Ìô”! Ìô”" Ìô”+ Ìô”, Ìô”1 Ìô#˜” Ì•” Ì•
” Ìõ” Ìõ” Ìõ”- Ìõ”. Ìõ ”3 Ìõ%–” Ì•” Ì•
” Ìö” Ìö
” Ìö”/ Ìö!–” Ì•” Ì•
” Ì÷” Ì÷”  Ì÷”! Ì÷”” Ì•” Ì•
” Ìø”" Ìø’” Ì–” Ì–	” Ì–” Ì–	” Ì›” Ì›” Ì›” Ì›” Ì›” Ì›”  Ì›”" Ì›”( Ì›”* Ì›!”+ Ì›"”- Ì›$”” Ì—” Ì—” Ì—” Ì—–” Ì—” Ì—” Ì˜” Ì˜” Ì˜” Ì˜˜” Ì—” Ì—” Ì™” Ì™” Ì™”& Ì™ ”' Ì™!”+ Ì™%’” Ì—” Ì—’” Ì–” Ì–	š” Ìœ” Ìœ
” Ìœ” Ìœ” Ìœ” Ìœ”! Ìœ”& Ìœ ”' Ìœ!”) Ìœ#”” Ì” Ì”$ Ì”+ Ì–” Ì” Ì” Ì”% Ì”& Ì”( Ì”” Ì” Ì” ÌŸ”& ÌŸ” Ì” Ì” Ì ”$ Ì ”% Ì ”' Ì ”+ Ì ”- Ì ”/ Ì ”1 Ì ”6 Ì $”8 Ì &”: Ì (”< Ì *’” Ì” Ì‘” Ì¡‘” Ì¡˜” Ì¢” Ì¢”$ Ì¢”& Ì¢”+ Ì¢”- Ì¢”. Ì¢”0 Ì¢˜” Ì¢” Ì¢” ÌÔ	”' ÌÔ”( ÌÔ”2 ÌÔ”3 ÌÔ”9 ÌÔ%–” Ì¢” Ì¢” ÌÕ	”" ÌÕ”# ÌÕ”9 ÌÕ%˜” Ì¢” Ì¢” ÌÖ	”* ÌÖ”+ ÌÖ”/ ÌÖ”0 ÌÖ”8 ÌÖ$–” Ì¢” Ì¢” Ì×	”) Ì×”* Ì×”+ Ì×’” Ì£
” Ì£’”? Ì£0”ÌD Ì£>’”( Ì¤”0 Ì¤”$ Ì¤”, Ì¤”- ÌÑ”3 ÌÑ”4 ÌÑ”6 ÌÑ”: ÌÑ”< ÌÑ”= ÌÑ”? ÌÑ”ÌD ÌÑ$”ÌF ÌÑ&”ÌG ÌÑ'”ÌI ÌÑ)’”( Ì¥”. Ì¥˜”( Ì¦”+ Ì¦”3 Ì¦”5 Ì¦”: Ì¦”< Ì¦”= Ì¦”? Ì¦ –”( Ì¦”+ Ì¦”, ÌÆ”1 ÌÆ”2 ÌÆ”ÌH ÌÆ-˜”( Ì¦”+ Ì¦”, ÌÇ”6 ÌÇ”7 ÌÇ”ÌD ÌÇ)”ÌE ÌÇ*”ÌK ÌÇ0”( Ì¦”+ Ì¦”, ÌÈ”3 ÌÈ”4 ÌÈ”6 ÌÈ”9 ÌÈ”; ÌÈ ”= ÌÈ"”? ÌÈ$”ÌE ÌÈ*”ÌG ÌÈ,”ÌI ÌÈ.”ÌK ÌÈ0Ü ”( Ì¦”+ Ì¦”, ÌÉ”3 ÌÉ”4 ÌÉ”7 ÌÉ”9 ÌÉ”: ÌÉ”> ÌÉ#”? ÌÉ$”ÌI ÌÉ.”ÌJ ÌÉ/”ÌO ÌÉ4”ÌP ÌÉ5”ÌW ÌÉ<”ÌX ÌÉ=”( Ì§”0 Ì§”8 Ì§”: Ì§”> Ì§!”Ì@ Ì§#”ÌI Ì§,”ÌL Ì§/”ÌQ Ì§4”ÌR Ì§5”ÌY Ì§<”ÌZ Ì§=”Ì\ Ì§?”Ì^ Ì§ÌA”( Ì§”0 Ì§”1 Ì¨”5 Ì¨”6 Ì¨”8 Ì¨”= Ì¨!”? Ì¨#”ÌA Ì¨%”ÌC Ì¨'”ÌI Ì¨-”ÌK Ì¨/”ÌM Ì¨1”ÌO Ì¨3Ÿ”( Ì§”0 Ì§”1 Ì©”7 Ì©”8 Ì©”< Ì© ”= Ì©!”ÌG Ì©+”ÌH Ì©,”ÌM Ì©1”ÌN Ì©2”ÌU Ì©9”ÌV Ì©:”ÌX Ì©<”ÌY Ì©=Ü ”( Ì§”0 Ì§”1 Ìª”9 Ìª”: Ìª”= Ìª!”? Ìª#”Ì@ Ìª$”ÌD Ìª(”ÌE Ìª)”ÌT Ìª8”ÌU Ìª9”ÌZ Ìª>”Ì[ Ìª?”Ìb ÌªÌF”Ìc ÌªÌG”Ìe ÌªÌI”Ìf ÌªÌJš”( Ì§”0 Ì§”1 Ì«”7 Ì«”8 Ì«”: Ì«”? Ì«#”ÌA Ì«%”ÌB Ì«&”ÌD Ì«(’”$ Ì§”, Ì§˜”( Ì¬”- Ì¬”5 Ì¬”: Ì¬”; Ì¬”ÌB Ì¬%”ÌC Ì¬&”ÌH Ì¬+–”( Ì¬”- Ì¬”. Ì­”3 Ì­”4 Ì­”7 Ì­–”( Ì¬”- Ì¬”. Ì®”4 Ì®”5 Ì®”8 Ì®–”( Ì¬”- Ì¬”. Ì¯”: Ì¯!”; Ì¯"”= Ì¯$˜”( Ì¬”- Ì¬”. Ì°”7 Ì°”8 Ì°”Ì@ Ì°'”ÌA Ì°(”ÌF Ì°-–”( Ì¬”- Ì¬”. Ì±”7 Ì±”8 Ì±”= Ì±$’”( Ì²”. Ì²˜”( Ì²”. Ì²”/ ÌÃ”9 ÌÃ”: ÌÃ”ÌI ÌÃ-”ÌJ ÌÃ.”ÌO ÌÃ3–”( Ì²”. Ì²”/ ÌÄ”; ÌÄ”< ÌÄ ”= ÌÄ!˜”( Ì³”, Ì³”4 Ì³”9 Ì³”: Ì³”ÌA Ì³&”ÌB Ì³'”ÌG Ì³,–”( Ì³”, Ì³”- Ì´”5 Ì´”6 Ì´ ”8 Ì´"˜”( Ì³”, Ì³”- Ìµ”7 Ìµ!”8 Ìµ"”ÌB Ìµ,”ÌC Ìµ-”ÌI Ìµ3””( Ì³”, Ì³”- Ì¶”6 Ì¶ –”( Ì³”, Ì³”- Ì·”5 Ì·”6 Ì· ”7 Ì·!˜”( Ì³”, Ì³”- Ì¸”6 Ì¸ ”7 Ì¸!”Ì@ Ì¸*”ÌA Ì¸+”ÌF Ì¸0œ”( Ì³”, Ì³”- Ì¹”9 Ì¹#”: Ì¹$”< Ì¹&”ÌD Ì¹.”ÌF Ì¹0”ÌR Ì¹<”ÌS Ì¹=”Ì[ Ì¹ÌE”Ì] Ì¹ÌG–”( Ì³”, Ì³”- Ìº”2 Ìº”3 Ìº”9 Ìº#’”$ Ì³”( Ì³Ÿ”( Ì»”, Ì»”4 Ì»”7 Ì»”: Ì»”? Ì»$”Ì@ Ì»%”ÌG Ì»,”ÌH Ì»-”ÌM Ì»2”ÌN Ì»3”ÌU Ì»:”ÌV Ì»;”ÌW Ì»<”ÌX Ì»=–”( Ì»”, Ì»”- Ì¼”5 Ì¼”6 Ì¼ ”8 Ì¼"””( Ì»”, Ì»”- Ì½”6 Ì½ ˜”( Ì»”, Ì»”- Ì¾”7 Ì¾!”8 Ì¾"”ÌB Ì¾,”ÌC Ì¾-”ÌG Ì¾1’”$ Ì»”( Ì»˜”( Ì¿”, Ì¿”4 Ì¿”: Ì¿”= Ì¿"”ÌB Ì¿'”ÌC Ì¿(”ÌK Ì¿0–”( Ì¿”, Ì¿”- ÌÀ”5 ÌÀ”6 ÌÀ ”8 ÌÀ"””( Ì¿”, Ì¿”- ÌÁ”6 ÌÁ ’”$ Ì¿”( Ì¿’”$ Ì²”* Ì²’”$ Ì¦”' Ì¦’”( ÌË”/ ÌË””( ÌË”/ ÌË”0 ÌÌ”5 ÌÌ–”( ÌË”/ ÌË”0 ÌÍ”7 ÌÍ”8 ÌÍ”; ÌÍš”( ÌË”/ ÌË”0 ÌÎ”6 ÌÎ”7 ÌÎ”9 ÌÎ”< ÌÎ”> ÌÎ!”Ì@ ÌÎ#”ÌB ÌÎ%’”$ Ì¥”* Ì¥’”$ Ì¤”, Ì¤’”  Ì¤”( Ì¤””; Ì£”? Ì£”Ì@ Ì£”ÌE Ì£’” Ì£
” Ì£’” Ì¢” Ì¢‘” ÌØš” ÌÚ” ÌÚ
” ÌÚ” ÌÚ” ÌÚ” ÌÚ”! ÌÚ”$ ÌÚ”% ÌÚ”' ÌÚ!˜” ÌÛ” ÌÛ”# ÌÛ”% ÌÛ”* ÌÛ”, ÌÛ”. ÌÛ”0 ÌÛÜ ” ÌÛ” ÌÛ” Ìî	”# Ìî”$ Ìî”& Ìî”* Ìî”, Ìî”. Ìî”0 Ìî”5 Ìî"”7 Ìî$”9 Ìî&”; Ìî(”> Ìî+”Ì@ Ìî-”ÌA Ìî.”ÌC Ìî0”ÌI Ìî6”ÌK Ìî8”ÌM Ìî:”ÌO Ìî<–” ÌÛ” ÌÛ” Ìï	”! Ìï”" Ìï”8 Ìï%˜” ÌÛ” ÌÛ” Ìğ	”+ Ìğ”, Ìğ”1 Ìğ”2 Ìğ”7 Ìğ$Ü ” ÌÛ” ÌÛ” Ìñ	”" Ìñ”# Ìñ”% Ìñ”+ Ìñ”- Ìñ”. Ìñ”0 Ìñ”5 Ìñ"”7 Ìñ$”ÌB Ìñ/”ÌD Ìñ1”ÌK Ìñ8”ÌM Ìñ:”ÌN Ìñ;”ÌO Ìñ<”ÌQ Ìñ>”” ÌÜ
” ÌÜ”/ ÌÜ”3 ÌÜ–” ÌÜ
” ÌÜ” Ìİ”' Ìİ”( Ìİ”* Ìİ˜” ÌÜ
” ÌÜ” ÌŞ”( ÌŞ”) ÌŞ”. ÌŞ”/ ÌŞ”4 ÌŞ"–” ÌÜ
” ÌÜ” Ìß”. Ìß”/ Ìß”8 Ìß&–” ÌÜ
” ÌÜ” Ìà”+ Ìà”, Ìà”. Ìà–” ÌÜ
” ÌÜ” Ìá”% Ìá”& Ìá”( Ìá–” ÌÜ
” ÌÜ” Ìâ”+ Ìâ”, Ìâ”- Ìâœ” ÌÜ
” ÌÜ” Ìã”& Ìã”' Ìã”* Ìã”, Ìã”- Ìã”1 Ìã”2 Ìã ”ÌF Ìã4”ÌH Ìã6’” ÌÜ
” ÌÜ”” Ìå
” Ìå”/ Ìå”3 Ìå–” Ìå
” Ìå” Ìæ”' Ìæ”( Ìæ”* Ìæ˜” Ìå
” Ìå” Ìç”( Ìç”) Ìç”. Ìç”/ Ìç”4 Ìç"–” Ìå
” Ìå” Ìè”. Ìè”/ Ìè”8 Ìè&–” Ìå
” Ìå” Ìé”+ Ìé”, Ìé”. Ìé–” Ìå
” Ìå” Ìê”% Ìê”& Ìê”( Ìê–” Ìå
” Ìå” Ìë”+ Ìë”, Ìë”- Ìë” Ìå
” Ìå” Ìì”& Ìì”' Ìì”, Ìì”0 Ìì”2 Ìì ”3 Ìì!”9 Ìì'”= Ìì+”> Ìì,”ÌT ÌìÌB”ÌV ÌìÌD’” Ìå
” Ìå’” ÌÛ” ÌÛ‘” Ìò‘” Ìò’” Ì•” Ì•
‘” ÌùÔrH–§version¤file§sources®sourcesContent¥names¨mappingsÀ‘À‘ÀÜo‘”    ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”  	 ‘”  
 ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”   ‘”    ‘”  ! ‘”  " ‘”  # ‘”  $ ‘”  % ‘”  & ‘”  ' ‘”  ( ‘”  ) ‘”  * ‘”  + ‘”  , ‘”  - ‘”  . ‘”  / ‘”  0 ‘”  1 ‘”  2 ‘”  3 ‘”  4 ‘”  5 ‘”  6 ‘”  7 ‘”  8 ‘”  9 ‘”  : ‘”  ; ‘”  < ‘”  = ‘”  > ‘”  ? ‘”  Ì@ ‘”  ÌA ‘”  ÌB ‘”  ÌC ‘”  ÌD ‘”  ÌE ‘”  ÌF ‘”  ÌG ‘”  ÌH ‘”  ÌI ‘”  ÌJ ‘”  ÌK ‘”  ÌL ‘”  ÌM ‘”  ÌN ‘”  ÌO ‘”  ÌP ‘”  ÌQ ‘”  ÌR ‘”  ÌS ‘”  ÌT ‘”  ÌU ‘”  ÌV ‘”  ÌW ‘”  ÌX ‘”  ÌY ‘”  ÌZ ‘”  Ì[ ‘”  Ì\ ‘”  Ì] ‘”  Ì^ ‘”  Ì_ ‘”  Ì` ‘”  Ìa ‘”  Ìb ‘”  Ìc ‘”  Ìd ‘”  Ìe ‘”  Ìf ‘”  Ìg ‘”  Ìh ‘”  Ìi ‘”  Ìj ‘”  Ìk ‘”  Ìl ‘”  Ìm ‘”  Ìn ‘”  Ìo ‘”  Ìp ‘”  Ìq ‘”  Ìr ‘”  Ìs ‘”  Ìt ‘”  Ìu ‘”  Ìv ‘”  Ìw ‘”  Ìx ‘”  Ìy ‘”  Ìz ‘”  Ì{ ‘”  Ì| ‘”  Ì} ‘”  Ì~ ‘”  Ì ‘”  Ì€ ‘”  Ì ‘”  Ì‚ ‘”  Ìƒ ‘”  Ì„ ‘”  Ì… ‘”  Ì† ‘”  Ì‡ ‘”  Ìˆ ‘”  Ì‰ ‘”  ÌŠ ‘”  Ì‹ ‘”  ÌŒ ‘”  Ì ‘”  Ì ‘”  Ì ‘”  Ì ‘”  Ì‘ ‘”  Ì’ ‘”  Ì“ ‘”  Ì” ‘”  Ì• ‘”  Ì– ‘”  Ì— ‘”  Ì˜ ‘”  Ì™ ‘”  Ìš ‘”  Ì› ‘”  Ìœ ‘”  Ì ‘”  Ì ‘”  ÌŸ ‘”  Ì  ‘”  Ì¡ ‘”  Ì¢ ‘”  Ì£ ‘”  Ì¤ ‘”  Ì¥ ‘”  Ì¦ ‘”  Ì§ ‘”  Ì¨ ‘”  Ì© ‘”  Ìª ‘”  Ì« ‘”  Ì¬ ‘”  Ì­ ‘”  Ì® ‘”  Ì¯ ‘”  Ì° ‘”  Ì± ‘”  Ì² ‘”  Ì³ ‘”  Ì´ ‘”  Ìµ ‘”  Ì¶ ‘”  Ì· ‘”  Ì¸ ‘”  Ì¹ ‘”  Ìº ‘”  Ì» ‘”  Ì¼ ‘”  Ì½ ‘”  Ì¾ ‘”  Ì¿ ‘”  ÌÀ ‘”  ÌÁ ‘”  ÌÂ ‘”  ÌÃ ‘”  ÌÄ ‘”  ÌÅ ‘”  ÌÆ ‘”  ÌÇ ‘”  ÌÈ ‘”  ÌÉ ‘”  ÌÊ ‘”  ÌË ‘”  ÌÌ ‘”  ÌÍ ‘”  ÌÎ ‘”  ÌÏ ‘”  ÌĞ ‘”  ÌÑ ‘”  ÌÒ ‘”  ÌÓ ‘”  ÌÔ ‘”  ÌÕ ‘”  ÌÖ ‘”  Ì× ‘”  ÌØ ‘”  ÌÙ ‘”  ÌÚ ‘”  ÌÛ ‘”  ÌÜ ‘”  Ìİ ‘”  ÌŞ ‘”  Ìß ‘”  Ìà ‘”  Ìá ‘”  Ìâ ‘”  Ìã ‘”  Ìä ‘”  Ìå ‘”  Ìæ ‘”  Ìç ‘”  Ìè ‘”  Ìé ‘”  Ìê ‘”  Ìë ‘”  Ìì ‘”  Ìí ‘”  Ìî ‘”  Ìï ‘”  Ìğ ‘”  Ìñ ‘”  Ìò ‘”  Ìó ‘”  Ìô ‘”  Ìõ ‘”  Ìö ‘”  Ì÷ ‘”  Ìø ‘”  Ìù ‘”  Ìú ‘”  Ìû ‘”  Ìü ‘”  Ìı ‘”  Ìş ‘”  Ìÿ ‘”  Í  ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í	 ‘”  Í
 ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í ‘”  Í  ‘”  Í! ‘”  Í" ‘”  Í# ‘”  Í$ ‘”  Í% ‘”  Í& ‘”  Í' ‘”  Í( ‘”  Í) ‘”  Í* ‘”  Í+ ‘”  Í, ‘”  Í- ‘”  Í. ‘”  Í/ ‘”  Í0 ‘”  Í1 ‘”  Í2 ‘”  Í3 ‘”  Í4 ‘”  Í5 ‘”  Í6 ‘”  Í7 ‘”  Í8 ‘”  Í9 ‘”  Í: ‘”  Í; ‘”  Í< ‘”  Í= ‘”  Í> ‘”  Í? ‘”  Í@ ‘”  ÍA ‘”  ÍB ‘”  ÍC ‘”  ÍD ‘”  ÍE ‘”  ÍF ‘”  ÍG ‘”  ÍH ‘”  ÍI ‘”  ÍJ ‘”  ÍK ‘”  ÍL ‘”  ÍM ‘”  ÍN ‘”  ÍO ‘”  ÍP ‘”  ÍQ ‘”  ÍR ‘”  ÍS ‘”  ÍT ‘”  ÍU ‘”  ÍV ‘”  ÍW ‘”  ÍX ‘”  ÍY ‘”  ÍZ ‘”  Í[ ‘”  Í\ ‘”  Í] ‘”  Í^ ‘”  Í_ ‘”  Í` ‘”  Ía ‘”  Íb ‘”  Íc ‘”  Íd ‘”  Íe ‘”  Íf ‘”  Íg ‘”  Íh ‘”  Íi ‘”  Íj ‘”  Ík ‘”  Íl ‘”  Ím ‘”  Ín ÔrI’§missing¦pluginÃ¦genAbcÂÔ  ÔrJ”²dynamicImportCache¹exportAllDeclarationCache»exportNamedDeclarationCache«importCache—ÔrK•¤type¥start£endªspecifiers¦source±ImportDeclarationÌ–ÌÙ‘ÔrL•¤type¥start£end¨imported¥local¯ImportSpecifierÌŸÌµÔrM”¤type¥start£end¤nameªIdentifierÌŸÌµ¶LAYOUT_WIDTH_OR_HEIGHTMªIdentifierÌŸÌµ¶LAYOUT_WIDTH_OR_HEIGHTÔrN•¤type¥start£end¥value£raw§LiteralÌ½ÌØ¹../common/CommonConstants»'../common/CommonConstants'K±ImportDeclarationÌÛÍ‘ÔrO”¤type¥start£end¥local¶ImportDefaultSpecifierÌâÌëMªIdentifierÌâÌë©CartStoreN§LiteralÌñÍ³../common/CartStoreµ'../common/CartStore'K±ImportDeclarationÍ	Í7‘O¶ImportDefaultSpecifierÍÍMªIdentifierÍÍªOrderStoreN§LiteralÍ Í6´../common/OrderStore¶'../common/OrderStore'K±ImportDeclarationÍ9Íi‘O¶ImportDefaultSpecifierÍ@ÍKMªIdentifierÍ@ÍK«PointsStoreN§LiteralÍQÍhµ../common/PointsStore·'../common/PointsStore'K±ImportDeclarationÍkÍ§‘O¶ImportDefaultSpecifierÍrÍƒMªIdentifierÍrÍƒ±NotificationStoreN§LiteralÍ‰Í¦»../common/NotificationStore½'../common/NotificationStore'K±ImportDeclarationÍ©ÍÍ‘O¶ImportDefaultSpecifierÍ°Í¶MªIdentifierÍ°Í¶¦promptN§LiteralÍ¼ÍÌ®@system.prompt°'@system.prompt'K±ImportDeclarationÍÏÍñ‘O¶ImportDefaultSpecifierÍÖÍÜMªIdentifierÍÖÍÜ¦routerN§LiteralÍâÍğ¬@ohos.router®'@ohos.router'